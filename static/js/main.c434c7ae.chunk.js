(this.webpackJsonprefood=this.webpackJsonprefood||[]).push([[0],{44:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),i=n(16),s=n.n(i),r=n(23),j=n(14),o=n(18),d=n(32),l=n(24),b=n(41);b.a.initializeApp({apiKey:"AIzaSyCCcdbiuG287wCxcntd9Zmb0FZlLYtCYxs",authDomain:"refood-75a72.firebaseapp.com",databaseURL:"https://refood-75a72-default-rtdb.firebaseio.com",projectId:"refood-75a72",storageBucket:"refood-75a72.appspot.com",messagingSenderId:"878850802529",appId:"1:878850802529:web:87b2ccc79a156cd620fb20"});var O=b.a,u=(n(58),n(3)),x=["places"],p={width:"100%",height:"400px"},h={lat:37.33,lng:-121.893},f={disableDefaultUI:!0,zoomControl:!0};function m(){var e=Object(l.d)({googleMapsApiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/refood",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_MAPS_API_KEY,libraries:x}),t=e.isLoaded,n=e.loadError,i=a.a.useState([]),s=Object(o.a)(i,2),b=s[0],m=s[1],v=a.a.useState(null),g=Object(o.a)(v,2),E=g[0],S=g[1],w=a.a.useState([]),C=Object(o.a)(w,2),_=C[0],y=C[1],P=O.firestore().collection("/signups");Object(c.useEffect)((function(){var e=O.database().ref("/EventInfo"),t=[];e.on("value",(function(e){var n=e.val();for(var c in n)t.push({data:n[c].data,time:n[c].time});m(t)})),P.onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),y(t)}))}),[]);var D=Object(d.a)(),I=D.register,L=D.handleSubmit,F=a.a.useRef(),R=a.a.useCallback((function(e){F.current=e}),[]);return n?"Error loading maps":t?Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Refood Store Interface"}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{class:"map",children:[Object(u.jsx)("h2",{class:"map-header",children:"Food Event Map"}),Object(u.jsxs)(l.a,{mapContainerStyle:p,zoom:12,center:h,options:f,onLoad:R,onClick:function(){return S(null)},children:[b.map((function(e){return Object(u.jsx)(l.c,{position:{lat:parseFloat(e.data.lat),lng:parseFloat(e.data.lng)},icon:{url:"../refood_icon.png",scaledSize:new window.google.maps.Size(45,45),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(22.5,22.5)},onClick:function(){S(e)}},e.time)})),E?Object(u.jsx)(l.b,{position:{lat:parseFloat(E.data.lat),lng:parseFloat(E.data.lng)},onCloseClick:function(){S(null)},children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:E.data.name}),Object(u.jsx)("p",{children:E.data.description}),Object(u.jsxs)("p",{children:["Event start: ",E.data.startDate]}),Object(u.jsxs)("p",{children:["Event end: ",E.data.endDate]})]})}):null]})]}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{class:"create-event",children:[Object(u.jsx)("h2",{class:"form-header",children:"Create New Event"}),Object(u.jsx)("br",{}),Object(u.jsxs)("form",{onSubmit:L((function(e){O.database().ref("/EventInfo").push({data:e,time:(new Date).toString()}),m((function(t){return[].concat(Object(j.a)(t),[{data:e,time:(new Date).toString()}])})),document.getElementById("add-marker-form").reset()})),id:"add-marker-form",children:[Object(u.jsxs)("div",{class:"field",children:[Object(u.jsx)("input",Object(r.a)({type:"number",step:"any",required:!0},I("lat"))),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"Latitude"})]}),Object(u.jsxs)("div",{class:"field",children:[Object(u.jsx)("input",Object(r.a)({type:"number",step:"any",required:!0},I("lng"))),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"Longitude"})]}),Object(u.jsxs)("div",{class:"field",children:[Object(u.jsx)("input",Object(r.a)({type:"text",required:!0},I("name"))),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"Event name"})]}),Object(u.jsxs)("div",{class:"field",children:[Object(u.jsx)("input",Object(r.a)({type:"datetime-local",required:!0},I("startDate"))),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"Event start"})]}),Object(u.jsxs)("div",{class:"field",children:[Object(u.jsx)("input",Object(r.a)({type:"datetime-local",required:!0},I("endDate"))),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"Event end"})]}),Object(u.jsxs)("div",{class:"field",children:[Object(u.jsx)("input",Object(r.a)({type:"text",required:!0},I("description"))),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"Event description"})]}),Object(u.jsx)("input",{type:"submit"})]})]}),Object(u.jsx)("h1",{children:"Sign Ups"}),Object(u.jsx)("div",{id:"table-container",children:Object(u.jsxs)("table",{children:[Object(u.jsxs)("thead",{children:[Object(u.jsx)("th",{children:"First Name"}),Object(u.jsx)("th",{children:"Last Name"}),Object(u.jsx)("th",{children:"Email"})]}),Object(u.jsx)("tbody",{children:_.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.fname}),Object(u.jsx)("td",{children:e.lname}),Object(u.jsx)("td",{children:e.email})]})}))})]})})]}):"Loading maps"}n(44);var v=n(34);function g(){return Object(u.jsxs)("div",{id:"container",children:[Object(u.jsx)("img",{class:"lp-logo",src:"refood_transparent.png",alt:"Refood Logo"}),Object(u.jsx)(v.b,{to:"/store-view",children:Object(u.jsx)("button",{className:"landing-button",children:"Sign in as Store"})}),Object(u.jsx)(v.b,{to:"/i-view",children:Object(u.jsx)("button",{className:"landing-button",children:"View Upcoming Events"})})]})}var E=n(11),S=n(85),w=["places"],C={width:"100%",height:"600px"},_={lat:37.33,lng:-121.893},y={disableDefaultUI:!0,zoomControl:!0};function P(){var e=Object(l.d)({googleMapsApiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/refood",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_MAPS_API_KEY,libraries:w}),t=e.isLoaded,n=e.loadError,i=a.a.useState([]),s=Object(o.a)(i,2),j=s[0],b=s[1],x=a.a.useState(null),p=Object(o.a)(x,2),h=p[0],f=p[1],m=a.a.useState(!1),v=Object(o.a)(m,2),g=v[0],E=v[1],P=O.firestore().collection("/signups");Object(c.useEffect)((function(){var e=O.database().ref("/EventInfo"),t=[];e.on("value",(function(e){var n=e.val();for(var c in n)t.push({data:n[c].data,time:n[c].time});for(var a in t)b(t)}))}),[]);var D=Object(d.a)(),I=D.register,L=D.handleSubmit,F=a.a.useRef(),R=a.a.useCallback((function(e){F.current=e}),[]);return n?"Error loading maps":t?Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Refood Individual Interface"}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{class:"map",children:[Object(u.jsx)("h2",{class:"map-header",children:"Food Event Map"}),Object(u.jsxs)(l.a,{mapContainerStyle:C,zoom:12,center:_,options:y,onLoad:R,onClick:function(){return f(null)},children:[j.map((function(e){return Object(u.jsx)(l.c,{position:{lat:parseFloat(e.data.lat),lng:parseFloat(e.data.lng)},icon:{url:"../refood_icon.png",scaledSize:new window.google.maps.Size(45,45),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(22.5,22.5)},onClick:function(){f(e)}},e.time)})),h?Object(u.jsx)(l.b,{position:{lat:parseFloat(h.data.lat),lng:parseFloat(h.data.lng)},onCloseClick:function(){f(null)},children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:h.data.name}),Object(u.jsx)("p",{children:h.data.description}),Object(u.jsxs)("p",{children:["Event start: ",h.data.startDate]}),Object(u.jsxs)("p",{children:["Event end: ",h.data.endDate]}),Object(u.jsx)("button",{className:"signup-button",onClick:function(){E(!0)},children:"Sign Up"}),Object(u.jsx)(S.a,{open:g,onClose:function(){E(!1)},PaperProps:{style:{borderRadius:20,width:"55vh"}},children:Object(u.jsxs)("div",{class:"sign-form",children:[Object(u.jsx)("h2",{children:"Event Sign Up"}),Object(u.jsx)("br",{}),Object(u.jsxs)("form",{id:"signup-form",onSubmit:L((function(e){var t;t=e,P.doc().set(t).catch((function(e){console.error(e)})),document.getElementById("signup-form").reset()})),children:[Object(u.jsxs)("div",{class:"field",children:[Object(u.jsx)("input",Object(r.a)({type:"text",required:!0},I("fname"))),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"First Name"})]}),Object(u.jsxs)("div",{class:"field",children:[Object(u.jsx)("input",Object(r.a)({type:"text",required:!0},I("lname"))),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"Last Name"})]}),Object(u.jsxs)("div",{class:"field",children:[Object(u.jsx)("input",Object(r.a)({type:"email",required:!0},I("email"))),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"Email"})]}),Object(u.jsx)("input",{type:"submit"})]})]})})]})}):null]})]})]}):"Loading maps"}var D=function(){return Object(u.jsx)(v.a,{children:Object(u.jsx)("div",{children:Object(u.jsxs)(E.c,{children:[Object(u.jsx)(E.a,{exact:!0,path:"/store-view",children:Object(u.jsx)(m,{})}),Object(u.jsx)(E.a,{exact:!0,path:"/i-view",children:Object(u.jsx)(P,{})}),Object(u.jsx)(E.a,{exact:!0,path:"/",children:Object(u.jsx)(g,{})})]})})})};s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(D,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.c434c7ae.chunk.js.map